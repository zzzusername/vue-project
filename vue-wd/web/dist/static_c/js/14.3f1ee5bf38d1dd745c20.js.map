{"version":3,"sources":["webpack:///static_c/js/14.3f1ee5bf38d1dd745c20.js","webpack:///./src/page/notice/Publish.vue","webpack:///src/page/notice/Publish.vue","webpack:///./src/page/notice/Publish.vue?a301","webpack:///./src/page/notice/Publish.vue?c741","webpack:///./src/page/notice/Publish.vue?e8e6"],"names":["webpackJsonp","0dmi","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","stringify","stringify_default","n","api","notice_api","Publish","data","options","label","title","noticeType","feedback","endDate","content","uploadData","imgs","showNoticeType","showTeacherOrgs","showClasses","orgOptions","teacherOrgs","classOptions","classes","schoolNoticeStatus","classNoticeStatus","fileList","userInfo","computed","watch","cval","oval","this","getTeacherOrgs","getClasses","mounted","_this","$store","dispatch","$route","params","schoolId","then","state","getTeacherFeatures","forEach","element","featureCode","schoolModel","er","toUser","$message","error","message","methods","handleRemove","file","str","index","length","response","key","uploadImgSuccess","uploadImg","f","_this2","uploadApi","getToken","type","args","result","uploadImage","token","path","onSuccess","onError","_this3","queryRelationOrg","orgType","rowStart","rowCount","array","push","orgName","orgId","_this4","getClassList","className","classId","queryTeacherClassList","val","publish","_this5","files","hasOwnProperty","name","url","warn","orgIds","classIds","publishNotice","noticeTitle","noticeImg","noticeBody","noticeReadFeedback","publishEndDate","noticeFile","undefined","$router","replace","msg","uploadFile","_this6","getFileType","filePath","startIndex","lastIndexOf","substring","toLowerCase","uploadFileSuccess","handleFileRemove","uploadFileError","eror","console","log","imgExceed","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","staticStyle","margin-right","width","attrs","placeholder","max","model","callback","$$v","expression","_l","item","_e","multiple","active-color","inactive-color","value-format","action","http-request","on-success","on-remove","on-error","size","slot","line-height","rows","font-size","limit","list-type","on-exceed","padding","on","click","staticRenderFns","esExports","notice_Publish","normalizeComponent","__vue_styles__","Component","3X6L","exports","i","locals","HWf9","version","sources","names","mappings","sourcesContent","sourceRoot"],"mappings":"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","file":"static_c/js/14.3f1ee5bf38d1dd745c20.js","sourcesContent":["webpackJsonp([14],{\n\n/***/ \"0dmi\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/json/stringify.js\nvar stringify = __webpack_require__(\"mvHQ\");\nvar stringify_default = /*#__PURE__*/__webpack_require__.n(stringify);\n\n// EXTERNAL MODULE: ./src/page/api.js\nvar api = __webpack_require__(\"vZqf\");\n\n// EXTERNAL MODULE: ./src/page/notice/api.js\nvar notice_api = __webpack_require__(\"eDIg\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/page/notice/Publish.vue\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var Publish = ({\n  data: function data() {\n    return {\n      options: [{ label: '全校公告', value: 1 }, { label: '教师公告', value: 2 }, { label: '班级公告', value: 3 }],\n      title: '',\n      noticeType: null,\n      feedback: false,\n      endDate: '',\n      content: '',\n      uploadData: {},\n      imgs: '',\n      showNoticeType: false,\n      showTeacherOrgs: false,\n      showClasses: false,\n      orgOptions: [],\n      teacherOrgs: [],\n      classOptions: [],\n      classes: [],\n      schoolNoticeStatus: false,\n      classNoticeStatus: false,\n      fileList: [],\n      userInfo: null\n    };\n  },\n\n  computed: {\n    // userInfo () {\n    //   return this.$store.state.userInfo\n    // }\n  },\n  watch: {\n    noticeType: function noticeType(cval, oval) {\n      // console.log(cval, oval)\n      switch (cval) {\n        case 1:\n          this.showClasses = false;\n          this.showTeacherOrgs = false;\n          break;\n        case 2:\n          this.getTeacherOrgs();\n          this.showClasses = false;\n          this.showTeacherOrgs = true;\n          break;\n        case 3:\n          this.getClasses();\n          this.showClasses = true;\n          this.showTeacherOrgs = false;\n          break;\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$store.dispatch('getUserInfo', this.$route.params.schoolId).then(function () {\n      _this.userInfo = _this.$store.state.userInfo;\n      api[\"a\" /* default */].getTeacherFeatures({ schoolId: _this.$route.params.schoolId }, function (data) {\n        data.forEach(function (element) {\n          if (element.featureCode === 'GONGGAO_XUEXIAO') {\n            _this.schoolNoticeStatus = true;\n          } else if (element.featureCode === 'GONGGAO_BANJI') {\n            _this.classNoticeStatus = true;\n          }\n        });\n        if (_this.schoolNoticeStatus) {\n          if (_this.userInfo.schoolModel === 2) {\n            _this.showNoticeType = false;\n            _this.noticeType = 1;\n          } else {\n            _this.showNoticeType = true;\n          }\n        } else {\n          _this.showNoticeType = false;\n          _this.showClasses = true;\n          _this.noticeType = 3;\n        }\n      }, function (er) {\n        if (er.toUser) {\n          _this.$message.error(er.message);\n        } else {\n          _this.$message.error(er.message);\n        }\n      });\n    });\n  },\n\n  methods: {\n    handleRemove: function handleRemove(file, fileList) {\n      var str = '';\n      for (var index = 0; index < fileList.length; index++) {\n        var element = fileList[index];\n        if (index !== fileList.length - 1) {\n          str = str + element.response.key + ',';\n        } else {\n          str += element.response.key;\n        }\n      }\n      this.imgs = str;\n    },\n    uploadImgSuccess: function uploadImgSuccess(response, file, fileList) {\n      var str = '';\n      for (var index = 0; index < fileList.length; index++) {\n        var element = fileList[index];\n        if (index !== fileList.length - 1) {\n          str = str + element.response.key + ',';\n        } else {\n          str += element.response.key;\n        }\n      }\n      this.imgs = str;\n    },\n    uploadImg: function uploadImg(f) {\n      var _this2 = this;\n\n      var api = this.uploadApi;\n      api.getToken({ type: 'SCHOOL_NOTICE', args: this.$route.params.schoolId }, function (result) {\n        api.uploadImage({ token: result.result.token, file: f.file, key: result.result.path }, function (data) {\n          f.onSuccess(data);\n        }, function (er) {\n          f.onError();\n        });\n      }, function (er) {\n        f.onError();\n        _this2.error(er, '上传失败');\n      });\n    },\n    getTeacherOrgs: function getTeacherOrgs() {\n      var _this3 = this;\n\n      api[\"a\" /* default */].queryRelationOrg({ schoolId: this.$route.params.schoolId, orgType: 1, rowStart: 0, rowCount: 999 }, function (data) {\n        var array = [];\n        data.forEach(function (element) {\n          array.push({ label: element.orgName, value: element.orgId });\n        });\n        _this3.orgOptions = array;\n      }, function (er) {\n        _this3.error(er, '获取教师群失败');\n      });\n    },\n    getClasses: function getClasses() {\n      var _this4 = this;\n\n      if (this.schoolNoticeStatus) {\n        api[\"a\" /* default */].getClassList({ schoolId: this.$route.params.schoolId, rowStart: 0, rowCount: 9999 }, function (data) {\n          var array = [];\n          data.forEach(function (element) {\n            array.push({ label: element.className, value: element.classId });\n          });\n          _this4.classOptions = array;\n        }, function (er) {\n          _this4.error(er, '获取班级失败');\n        });\n      } else {\n        api[\"a\" /* default */].queryTeacherClassList({ schoolId: this.$route.params.schoolId, featureCode: 'HUODONG_BANJI' }, function (data) {\n          var array = [];\n          data.forEach(function (element) {\n            array.push({ label: element.className, value: element.classId });\n          });\n          _this4.classOptions = array;\n        }, function (er) {\n          _this4.error(er, '获取班级失败');\n        });\n      }\n    },\n    error: function error(er, val) {\n      var message = val;\n      if (er.toUser) {\n        message = er.message;\n      }\n      this.$message.error(message);\n    },\n    publish: function publish() {\n      var _this5 = this;\n\n      var files = [];\n      if (this.fileList.length > 0) {\n        for (var key in this.fileList) {\n          if (this.fileList.hasOwnProperty(key)) {\n            var element = this.fileList[key];\n            files.push({ name: element.name, url: element.response.key });\n          }\n        }\n      }\n      var schoolId = this.$route.params.schoolId;\n      if (this.showTeacherOrgs && this.teacherOrgs.length === 0) {\n        this.warn('请选择接收公告的教师群');\n        return;\n      }\n      var orgIds = this.teacherOrgs;\n      if (this.showClasses && this.classes.length === 0) {\n        this.warn('请选择接收公告的班级');\n        return;\n      }\n      if (!this.noticeType) {\n        this.warn('请选择公告类型');\n        return;\n      }\n      if (!this.title) {\n        this.warn('标题不能为空');\n        return;\n      }\n      if (!this.content) {\n        this.warn('公告内容不能为空');\n        return;\n      }\n      var classIds = this.classes;\n      notice_api[\"a\" /* default */].publishNotice({\n        schoolId: schoolId,\n        classIds: classIds,\n        orgIds: orgIds,\n        noticeType: this.noticeType,\n        noticeTitle: this.title,\n        noticeImg: this.imgs,\n        noticeBody: this.content,\n        noticeReadFeedback: this.feedback ? 2 : 1,\n        publishEndDate: this.endDate + ' 23:59',\n        noticeFile: files.length > 0 ? stringify_default()(files) : undefined }, function (data) {\n        _this5.$message({\n          message: '发布成功',\n          type: 'success'\n        });\n        _this5.$router.replace({ name: 'NoticeList' });\n      }, function (er) {\n        _this5.error(er, '发布失败');\n      });\n    },\n    warn: function warn(msg) {\n      this.$message({\n        message: msg,\n        type: 'warning'\n      });\n    },\n    uploadFile: function uploadFile(f) {\n      var _this6 = this;\n\n      var type = '';\n      switch (this.getFileType(f.file.name)) {\n        case 'doc':\n        case 'docx':\n          type = 'SCHOOL_NOTICE_DOCX';\n          break;\n        case 'xls':\n        case 'xlsx':\n          type = 'SCHOOL_NOTICE_XLSX';\n          break;\n        case 'pdf':\n          type = 'SCHOOL_NOTICE_PDF';\n          break;\n        default:\n          this.warn('文件格式不正确');\n          f.onError();\n          return;\n      }\n      var api = this.uploadApi;\n      api.getToken({ type: type, args: this.$route.params.schoolId }, function (result) {\n        api.uploadImage({ token: result.result.token, file: f.file, key: result.result.path }, function (data) {\n          f.onSuccess(data);\n        }, function (er) {\n          f.onError();\n        });\n      }, function (er) {\n        f.onError();\n        _this6.error(er, '上传失败');\n      });\n    },\n    getFileType: function getFileType(filePath) {\n      var startIndex = filePath.lastIndexOf('.');\n      if (startIndex !== -1) {\n        return filePath.substring(startIndex + 1, filePath.length).toLowerCase();\n      } else {\n        return '';\n      }\n    },\n    uploadFileSuccess: function uploadFileSuccess(response, file, fileList) {\n      this.fileList = fileList;\n    },\n    handleFileRemove: function handleFileRemove(file, fileList) {\n      this.fileList = fileList;\n    },\n    uploadFileError: function uploadFileError(eror, file, fileList) {\n      console.log(file);\n      console.log(fileList);\n    },\n    imgExceed: function imgExceed(file, fileList) {\n      // console.log(file)\n      this.warn('最多只能上传九张图片');\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a198f04c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/notice/Publish.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"warpper\"},[_vm._m(0,false,false),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',[_c('span',{staticStyle:{\"margin-right\":\"4em\"}},[_vm._v(\"公告标题：\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"60vw\"},attrs:{\"placeholder\":\"请输入标题(100字以内)\",\"max\":100},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1),_vm._v(\" \"),(_vm.showNoticeType)?_c('div',[_c('span',{staticStyle:{\"margin-right\":\"4em\"}},[_vm._v(\"公告类型：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.noticeType),callback:function ($$v) {_vm.noticeType=$$v},expression:\"noticeType\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1):_vm._e(),_vm._v(\" \"),(_vm.showTeacherOrgs)?_c('div',[_c('span',{staticStyle:{\"margin-right\":\"3em\"}},[_vm._v(\"指定教师群：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"multiple\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.teacherOrgs),callback:function ($$v) {_vm.teacherOrgs=$$v},expression:\"teacherOrgs\"}},_vm._l((_vm.orgOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1):_vm._e(),_vm._v(\" \"),(_vm.showClasses)?_c('div',[_c('span',{staticStyle:{\"margin-right\":\"4em\"}},[_vm._v(\"指定班级：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"multiple\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.classes),callback:function ($$v) {_vm.classes=$$v},expression:\"classes\"}},_vm._l((_vm.classOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1):_vm._e(),_vm._v(\" \"),_c('div',[_c('span',{staticStyle:{\"margin-right\":\"1em\"}},[_vm._v(\"是否需要阅读反馈\")]),_vm._v(\" \"),_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#666\"},model:{value:(_vm.feedback),callback:function ($$v) {_vm.feedback=$$v},expression:\"feedback\"}})],1),_vm._v(\" \"),_c('div',[_c('span',{staticStyle:{\"margin-right\":\"4em\"}},[_vm._v(\"过期时间：\")]),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"type\":\"date\",\"value-format\":\"yyyy-MM-dd\",\"placeholder\":\"请选择截止提交时间\"},model:{value:(_vm.endDate),callback:function ($$v) {_vm.endDate=$$v},expression:\"endDate\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"30vw\"}},[_c('span',{staticStyle:{\"margin-right\":\"4em\"}},[_vm._v(\"附件上传：\")]),_vm._v(\" \"),_c('el-upload',{attrs:{\"action\":\"https://up-z2.qbox.me\",\"http-request\":_vm.uploadFile,\"on-success\":_vm.uploadFileSuccess,\"on-remove\":_vm.handleFileRemove,\"on-error\":_vm.uploadFileError}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传doc/docx/xls/xlsx/pdf文件\")])],1)],1),_vm._v(\" \"),_c('div',[_c('span',{staticStyle:{\"margin-right\":\"4em\",\"line-height\":\"132px\"}},[_vm._v(\"公告说明：\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"60vw\"},attrs:{\"type\":\"textarea\",\"rows\":5,\"max\":2000,\"placeholder\":\"请输入内容(2000字以内)\"},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1),_vm._v(\" \"),_c('div',[_c('p',{staticStyle:{\"font-size\":\"12px\"}},[_vm._v(\"最多能上传九张图片\")]),_vm._v(\" \"),_c('el-upload',{attrs:{\"limit\":9,\"action\":\"https://up-z2.qbox.me\",\"list-type\":\"picture-card\",\"http-request\":_vm.uploadImg,\"on-success\":_vm.uploadImgSuccess,\"on-exceed\":_vm.imgExceed,\"on-remove\":_vm.handleRemove}},[_c('i',{staticClass:\"el-icon-plus\"})])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"content\",staticStyle:{\"padding\":\"5px 20px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.publish}},[_vm._v(\"发布\")])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('span',[_vm._v(\"发布公告\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var notice_Publish = (esExports);\n// CONCATENATED MODULE: ./src/page/notice/Publish.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"3X6L\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a198f04c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  Publish,\n  notice_Publish,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var page_notice_Publish = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"3X6L\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"HWf9\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"rjj0\")(\"3fe1a793\", content, true);\n\n/***/ }),\n\n/***/ \"HWf9\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\\n.warpper[data-v-a198f04c] {\\n  width: 100%;\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 20px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.header[data-v-a198f04c] {\\n  background: #fff;\\n  border-top: 4px solid #67c23a;\\n  padding: 0 20px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.header span[data-v-a198f04c] {\\n  line-height: 60px;\\n  font-size: 16px;\\n  font-weight: 600;\\n}\\n.content[data-v-a198f04c] {\\n  background-color: #fff;\\n  margin-top: 5px;\\n}\\n.content[data-v-a198f04c] {\\n  padding: 0 20px;\\n}\\n.content div[data-v-a198f04c] {\\n  padding: 5px 0;\\n}\\n.silder[data-v-a198f04c] {\\n  position: fixed;\\n  top: 0px;\\n  left: 0px;\\n  right: 0px;\\n  width: 100vw;\\n  height: 100vh;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n.silder div[data-v-a198f04c] {\\n  width: 60%;\\n  margin: auto;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/wangweidong/Desktop/code/web-qun/src/page/notice/Publish.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,YAAY;EACZ,aAAa;EACb,iBAAiB;EACjB,cAAc;EACd,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,iBAAiB;EACjB,8BAA8B;EAC9B,gBAAgB;EAChB,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;CAClB;AACD;EACE,uBAAuB;EACvB,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,eAAe;CAChB;AACD;EACE,gBAAgB;EAChB,SAAS;EACT,UAAU;EACV,WAAW;EACX,aAAa;EACb,cAAc;EACd,kBAAkB;EAClB,mBAAmB;CACpB;AACD;EACE,WAAW;EACX,aAAa;CACd\",\"file\":\"Publish.vue\",\"sourcesContent\":[\"\\n.warpper[data-v-a198f04c] {\\n  width: 100%;\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 20px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.header[data-v-a198f04c] {\\n  background: #fff;\\n  border-top: 4px solid #67c23a;\\n  padding: 0 20px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.header span[data-v-a198f04c] {\\n  line-height: 60px;\\n  font-size: 16px;\\n  font-weight: 600;\\n}\\n.content[data-v-a198f04c] {\\n  background-color: #fff;\\n  margin-top: 5px;\\n}\\n.content[data-v-a198f04c] {\\n  padding: 0 20px;\\n}\\n.content div[data-v-a198f04c] {\\n  padding: 5px 0;\\n}\\n.silder[data-v-a198f04c] {\\n  position: fixed;\\n  top: 0px;\\n  left: 0px;\\n  right: 0px;\\n  width: 100vw;\\n  height: 100vh;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n.silder div[data-v-a198f04c] {\\n  width: 60%;\\n  margin: auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static_c/js/14.3f1ee5bf38d1dd745c20.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a198f04c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Publish.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Publish.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a198f04c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Publish.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a198f04c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/notice/Publish.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"warpper\">\n    <div class=\"header\">\n      <span>发布公告</span>\n    </div>\n    <div class=\"content\">\n      <div>\n        <span style=\"margin-right: 4em;\">公告标题：</span>\n        <el-input placeholder=\"请输入标题(100字以内)\" style=\"width: 60vw\" :max=\"100\" v-model=\"title\"></el-input>\n      </div>\n      <div v-if=\"showNoticeType\">\n        <span style=\"margin-right: 4em;\">公告类型：</span>\n        <el-select v-model=\"noticeType\" placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in options\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\">\n          </el-option>\n        </el-select>\n      </div>\n      <div v-if=\"showTeacherOrgs\">\n        <span style=\"margin-right: 3em;\">指定教师群：</span>\n        <el-select v-model=\"teacherOrgs\" multiple placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in orgOptions\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\">\n          </el-option>\n        </el-select>\n      </div>\n      <div v-if=\"showClasses\">\n        <span style=\"margin-right: 4em;\">指定班级：</span>\n        <el-select v-model=\"classes\" multiple placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in classOptions\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\">\n          </el-option>\n        </el-select>\n      </div>\n      <div>\n        <span style=\"margin-right: 1em;\">是否需要阅读反馈</span>\n        <el-switch\n          v-model=\"feedback\"\n          active-color=\"#13ce66\"\n          inactive-color=\"#666\">\n        </el-switch>\n      </div>\n      <div>\n        <span style=\"margin-right: 4em;\">过期时间：</span>\n        <el-date-picker v-model=\"endDate\" type=\"date\" value-format=\"yyyy-MM-dd\" placeholder=\"请选择截止提交时间\"></el-date-picker>\n      </div>\n      <div style=\"width: 30vw\">\n        <span style=\"margin-right: 4em;\">附件上传：</span>\n        <el-upload\n          action=\"https://up-z2.qbox.me\"\n          :http-request=\"uploadFile\"\n          :on-success=\"uploadFileSuccess\"\n          :on-remove=\"handleFileRemove\"\n          :on-error=\"uploadFileError\"\n          >\n          <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n          <div slot=\"tip\" class=\"el-upload__tip\">只能上传doc/docx/xls/xlsx/pdf文件</div>\n        </el-upload>\n      </div>\n      <div>\n        <span style=\"margin-right: 4em;line-height: 132px;\">公告说明：</span>\n        <el-input\n          style=\"width: 60vw\"\n          type=\"textarea\"\n          :rows=\"5\"\n          :max=\"2000\"\n          placeholder=\"请输入内容(2000字以内)\"\n          v-model=\"content\">\n        </el-input>\n      </div>\n      <div>\n        <p style=\"font-size: 12px;\">最多能上传九张图片</p>\n        <el-upload\n          :limit=\"9\"\n          action=\"https://up-z2.qbox.me\"\n          list-type=\"picture-card\"\n          :http-request=\"uploadImg\"\n          :on-success=\"uploadImgSuccess\"\n          :on-exceed=\"imgExceed\"\n          :on-remove=\"handleRemove\">\n          <i class=\"el-icon-plus\"></i>\n        </el-upload>\n      </div>\n    </div>\n    <div class=\"content\" style=\"padding: 5px 20px\">\n      <el-button type=\"primary\" @click=\"publish\">发布</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport baseApi from '../api'\nimport api from './api'\nexport default {\n  data () {\n    return {\n      options: [\n        {label: '全校公告', value: 1},\n        {label: '教师公告', value: 2},\n        {label: '班级公告', value: 3}\n      ],\n      title: '',\n      noticeType: null,\n      feedback: false,\n      endDate: '',\n      content: '',\n      uploadData: {},\n      imgs: '',\n      showNoticeType: false,\n      showTeacherOrgs: false,\n      showClasses: false,\n      orgOptions: [],\n      teacherOrgs: [],\n      classOptions: [],\n      classes: [],\n      schoolNoticeStatus: false,\n      classNoticeStatus: false,\n      fileList: [],\n      userInfo: null\n    }\n  },\n  computed: {\n    // userInfo () {\n    //   return this.$store.state.userInfo\n    // }\n  },\n  watch: {\n    noticeType (cval, oval) {\n      // console.log(cval, oval)\n      switch (cval) {\n        case 1:\n          this.showClasses = false\n          this.showTeacherOrgs = false\n          break\n        case 2:\n          this.getTeacherOrgs()\n          this.showClasses = false\n          this.showTeacherOrgs = true\n          break\n        case 3:\n          this.getClasses()\n          this.showClasses = true\n          this.showTeacherOrgs = false\n          break\n      }\n    }\n  },\n  mounted () {\n    this.$store.dispatch('getUserInfo', this.$route.params.schoolId).then(() => {\n      this.userInfo = this.$store.state.userInfo\n      baseApi.getTeacherFeatures({schoolId: this.$route.params.schoolId}, (data) => {\n        data.forEach(element => {\n          if (element.featureCode === 'GONGGAO_XUEXIAO') {\n            this.schoolNoticeStatus = true\n          } else if (element.featureCode === 'GONGGAO_BANJI') {\n            this.classNoticeStatus = true\n          }\n        })\n        if (this.schoolNoticeStatus) {\n          if (this.userInfo.schoolModel === 2) {\n            this.showNoticeType = false\n            this.noticeType = 1\n          } else {\n            this.showNoticeType = true\n          }\n        } else {\n          this.showNoticeType = false\n          this.showClasses = true\n          this.noticeType = 3\n        }\n      }, (er) => {\n        if (er.toUser) {\n          this.$message.error(er.message)\n        } else {\n          this.$message.error(er.message)\n        }\n      })\n    })\n  },\n  methods: {\n    handleRemove (file, fileList) {\n      let str = ''\n      for (let index = 0; index < fileList.length; index++) {\n        const element = fileList[index]\n        if (index !== (fileList.length - 1)) {\n          str = str + element.response.key + ','\n        } else {\n          str += element.response.key\n        }\n      }\n      this.imgs = str\n    },\n    uploadImgSuccess (response, file, fileList) {\n      let str = ''\n      for (let index = 0; index < fileList.length; index++) {\n        const element = fileList[index]\n        if (index !== (fileList.length - 1)) {\n          str = str + element.response.key + ','\n        } else {\n          str += element.response.key\n        }\n      }\n      this.imgs = str\n    },\n    uploadImg (f) {\n      let api = this.uploadApi\n      api.getToken({type: 'SCHOOL_NOTICE', args: this.$route.params.schoolId}, (result) => {\n        api.uploadImage({token: result.result.token, file: f.file, key: result.result.path}, (data) => {\n          f.onSuccess(data)\n        }, (er) => {\n          f.onError()\n        })\n      }, (er) => {\n        f.onError()\n        this.error(er, '上传失败')\n      })\n    },\n    getTeacherOrgs () {\n      baseApi.queryRelationOrg({schoolId: this.$route.params.schoolId, orgType: 1, rowStart: 0, rowCount: 999}, (data) => {\n        let array = []\n        data.forEach(element => {\n          array.push({label: element.orgName, value: element.orgId})\n        })\n        this.orgOptions = array\n      }, er => {\n        this.error(er, '获取教师群失败')\n      })\n    },\n    getClasses () {\n      if (this.schoolNoticeStatus) {\n        baseApi.getClassList({ schoolId: this.$route.params.schoolId, rowStart: 0, rowCount: 9999 }, (data) => {\n          let array = []\n          data.forEach(element => {\n            array.push({label: element.className, value: element.classId})\n          })\n          this.classOptions = array\n        }, er => {\n          this.error(er, '获取班级失败')\n        })\n      } else {\n        baseApi.queryTeacherClassList({schoolId: this.$route.params.schoolId, featureCode: 'HUODONG_BANJI'}, (data) => {\n          let array = []\n          data.forEach(element => {\n            array.push({label: element.className, value: element.classId})\n          })\n          this.classOptions = array\n        }, er => { this.error(er, '获取班级失败') })\n      }\n    },\n    error (er, val) {\n      let message = val\n      if (er.toUser) {\n        message = er.message\n      }\n      this.$message.error(message)\n    },\n    publish () {\n      let files = []\n      if (this.fileList.length > 0) {\n        for (const key in this.fileList) {\n          if (this.fileList.hasOwnProperty(key)) {\n            const element = this.fileList[key]\n            files.push({name: element.name, url: element.response.key})\n          }\n        }\n      }\n      let schoolId = this.$route.params.schoolId\n      if (this.showTeacherOrgs && this.teacherOrgs.length === 0) {\n        this.warn('请选择接收公告的教师群')\n        return\n      }\n      let orgIds = this.teacherOrgs\n      if (this.showClasses && this.classes.length === 0) {\n        this.warn('请选择接收公告的班级')\n        return\n      }\n      if (!this.noticeType) {\n        this.warn('请选择公告类型')\n        return\n      }\n      if (!this.title) {\n        this.warn('标题不能为空')\n        return\n      }\n      if (!this.content) {\n        this.warn('公告内容不能为空')\n        return\n      }\n      let classIds = this.classes\n      api.publishNotice({\n        schoolId,\n        classIds,\n        orgIds,\n        noticeType: this.noticeType,\n        noticeTitle: this.title,\n        noticeImg: this.imgs,\n        noticeBody: this.content,\n        noticeReadFeedback: this.feedback ? 2 : 1,\n        publishEndDate: this.endDate + ' 23:59',\n        noticeFile: files.length > 0 ? JSON.stringify(files) : undefined}, (data) => {\n        this.$message({\n          message: '发布成功',\n          type: 'success'\n        })\n        this.$router.replace({name: 'NoticeList'})\n      }, er => { this.error(er, '发布失败') })\n    },\n    warn (msg) {\n      this.$message({\n        message: msg,\n        type: 'warning'\n      })\n    },\n    uploadFile (f) {\n      let type = ''\n      switch (this.getFileType(f.file.name)) {\n        case 'doc':\n        case 'docx':\n          type = 'SCHOOL_NOTICE_DOCX'\n          break\n        case 'xls':\n        case 'xlsx':\n          type = 'SCHOOL_NOTICE_XLSX'\n          break\n        case 'pdf':\n          type = 'SCHOOL_NOTICE_PDF'\n          break\n        default:\n          this.warn('文件格式不正确')\n          f.onError()\n          return\n      }\n      let api = this.uploadApi\n      api.getToken({type: type, args: this.$route.params.schoolId}, (result) => {\n        api.uploadImage({token: result.result.token, file: f.file, key: result.result.path}, (data) => {\n          f.onSuccess(data)\n        }, (er) => {\n          f.onError()\n        })\n      }, (er) => {\n        f.onError()\n        this.error(er, '上传失败')\n      })\n    },\n    getFileType (filePath) {\n      let startIndex = filePath.lastIndexOf('.')\n      if (startIndex !== -1) {\n        return filePath.substring(startIndex + 1, filePath.length).toLowerCase()\n      } else { return '' }\n    },\n    uploadFileSuccess (response, file, fileList) {\n      this.fileList = fileList\n    },\n    handleFileRemove (file, fileList) {\n      this.fileList = fileList\n    },\n    uploadFileError (eror, file, fileList) {\n      console.log(file)\n      console.log(fileList)\n    },\n    imgExceed (file, fileList) {\n      // console.log(file)\n      this.warn('最多只能上传九张图片')\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import url('../../style/public.less');\n.content {\n  padding: 0 20px;\n  div {\n    padding: 5px 0;\n  }\n}\n.silder {\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  width: 100vw;\n  height: 100vh;\n  margin-left:auto;\n  margin-right:auto;\n  div {\n    width: 60%;\n    margin: auto;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/page/notice/Publish.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"warpper\"},[_vm._m(0,false,false),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',[_c('span',{staticStyle:{\"margin-right\":\"4em\"}},[_vm._v(\"公告标题：\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"60vw\"},attrs:{\"placeholder\":\"请输入标题(100字以内)\",\"max\":100},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1),_vm._v(\" \"),(_vm.showNoticeType)?_c('div',[_c('span',{staticStyle:{\"margin-right\":\"4em\"}},[_vm._v(\"公告类型：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.noticeType),callback:function ($$v) {_vm.noticeType=$$v},expression:\"noticeType\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1):_vm._e(),_vm._v(\" \"),(_vm.showTeacherOrgs)?_c('div',[_c('span',{staticStyle:{\"margin-right\":\"3em\"}},[_vm._v(\"指定教师群：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"multiple\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.teacherOrgs),callback:function ($$v) {_vm.teacherOrgs=$$v},expression:\"teacherOrgs\"}},_vm._l((_vm.orgOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1):_vm._e(),_vm._v(\" \"),(_vm.showClasses)?_c('div',[_c('span',{staticStyle:{\"margin-right\":\"4em\"}},[_vm._v(\"指定班级：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"multiple\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.classes),callback:function ($$v) {_vm.classes=$$v},expression:\"classes\"}},_vm._l((_vm.classOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1):_vm._e(),_vm._v(\" \"),_c('div',[_c('span',{staticStyle:{\"margin-right\":\"1em\"}},[_vm._v(\"是否需要阅读反馈\")]),_vm._v(\" \"),_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#666\"},model:{value:(_vm.feedback),callback:function ($$v) {_vm.feedback=$$v},expression:\"feedback\"}})],1),_vm._v(\" \"),_c('div',[_c('span',{staticStyle:{\"margin-right\":\"4em\"}},[_vm._v(\"过期时间：\")]),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"type\":\"date\",\"value-format\":\"yyyy-MM-dd\",\"placeholder\":\"请选择截止提交时间\"},model:{value:(_vm.endDate),callback:function ($$v) {_vm.endDate=$$v},expression:\"endDate\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"30vw\"}},[_c('span',{staticStyle:{\"margin-right\":\"4em\"}},[_vm._v(\"附件上传：\")]),_vm._v(\" \"),_c('el-upload',{attrs:{\"action\":\"https://up-z2.qbox.me\",\"http-request\":_vm.uploadFile,\"on-success\":_vm.uploadFileSuccess,\"on-remove\":_vm.handleFileRemove,\"on-error\":_vm.uploadFileError}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传doc/docx/xls/xlsx/pdf文件\")])],1)],1),_vm._v(\" \"),_c('div',[_c('span',{staticStyle:{\"margin-right\":\"4em\",\"line-height\":\"132px\"}},[_vm._v(\"公告说明：\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"60vw\"},attrs:{\"type\":\"textarea\",\"rows\":5,\"max\":2000,\"placeholder\":\"请输入内容(2000字以内)\"},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1),_vm._v(\" \"),_c('div',[_c('p',{staticStyle:{\"font-size\":\"12px\"}},[_vm._v(\"最多能上传九张图片\")]),_vm._v(\" \"),_c('el-upload',{attrs:{\"limit\":9,\"action\":\"https://up-z2.qbox.me\",\"list-type\":\"picture-card\",\"http-request\":_vm.uploadImg,\"on-success\":_vm.uploadImgSuccess,\"on-exceed\":_vm.imgExceed,\"on-remove\":_vm.handleRemove}},[_c('i',{staticClass:\"el-icon-plus\"})])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"content\",staticStyle:{\"padding\":\"5px 20px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.publish}},[_vm._v(\"发布\")])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('span',[_vm._v(\"发布公告\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a198f04c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/notice/Publish.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a198f04c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/less-loader/dist/cjs.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Publish.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"3fe1a793\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-a198f04c\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/page/notice/Publish.vue\n// module id = 3X6L\n// module chunks = 14","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.warpper[data-v-a198f04c] {\\n  width: 100%;\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 20px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.header[data-v-a198f04c] {\\n  background: #fff;\\n  border-top: 4px solid #67c23a;\\n  padding: 0 20px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.header span[data-v-a198f04c] {\\n  line-height: 60px;\\n  font-size: 16px;\\n  font-weight: 600;\\n}\\n.content[data-v-a198f04c] {\\n  background-color: #fff;\\n  margin-top: 5px;\\n}\\n.content[data-v-a198f04c] {\\n  padding: 0 20px;\\n}\\n.content div[data-v-a198f04c] {\\n  padding: 5px 0;\\n}\\n.silder[data-v-a198f04c] {\\n  position: fixed;\\n  top: 0px;\\n  left: 0px;\\n  right: 0px;\\n  width: 100vw;\\n  height: 100vh;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n.silder div[data-v-a198f04c] {\\n  width: 60%;\\n  margin: auto;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/wangweidong/Desktop/code/web-qun/src/page/notice/Publish.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,YAAY;EACZ,aAAa;EACb,iBAAiB;EACjB,cAAc;EACd,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,iBAAiB;EACjB,8BAA8B;EAC9B,gBAAgB;EAChB,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;CAClB;AACD;EACE,uBAAuB;EACvB,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,eAAe;CAChB;AACD;EACE,gBAAgB;EAChB,SAAS;EACT,UAAU;EACV,WAAW;EACX,aAAa;EACb,cAAc;EACd,kBAAkB;EAClB,mBAAmB;CACpB;AACD;EACE,WAAW;EACX,aAAa;CACd\",\"file\":\"Publish.vue\",\"sourcesContent\":[\"\\n.warpper[data-v-a198f04c] {\\n  width: 100%;\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 20px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.header[data-v-a198f04c] {\\n  background: #fff;\\n  border-top: 4px solid #67c23a;\\n  padding: 0 20px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.header span[data-v-a198f04c] {\\n  line-height: 60px;\\n  font-size: 16px;\\n  font-weight: 600;\\n}\\n.content[data-v-a198f04c] {\\n  background-color: #fff;\\n  margin-top: 5px;\\n}\\n.content[data-v-a198f04c] {\\n  padding: 0 20px;\\n}\\n.content div[data-v-a198f04c] {\\n  padding: 5px 0;\\n}\\n.silder[data-v-a198f04c] {\\n  position: fixed;\\n  top: 0px;\\n  left: 0px;\\n  right: 0px;\\n  width: 100vw;\\n  height: 100vh;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n.silder div[data-v-a198f04c] {\\n  width: 60%;\\n  margin: auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-a198f04c\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/page/notice/Publish.vue\n// module id = HWf9\n// module chunks = 14"],"sourceRoot":""}