webpackJsonp([16],{NwyA:function(t,e,n){var i=n("SpI2");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("46191606",i,!0)},SpI2:function(t,e,n){e=t.exports=n("FZ+f")(!0),e.push([t.i,"\n.warpper[data-v-2ddfbc45] {\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  padding: 20px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.header[data-v-2ddfbc45] {\n  background: #fff;\n  border-top: 4px solid #67c23a;\n  padding: 0 20px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.header span[data-v-2ddfbc45] {\n  line-height: 60px;\n  font-size: 16px;\n  font-weight: 600;\n}\n.content[data-v-2ddfbc45] {\n  background-color: #fff;\n  margin-top: 5px;\n}\n.filter[data-v-2ddfbc45] {\n  background-color: #fff;\n  padding: 10px 20px;\n}\n.filter span[data-v-2ddfbc45] {\n  margin-right: 10px;\n}\n.next[data-v-2ddfbc45] {\n  text-decoration: none;\n  color: #333;\n  display: block;\n  border: 1px solid #c2d5e3;\n  margin-top: 5px;\n  padding: 10px;\n  text-align: center;\n  font-size: 12px;\n}\n","",{version:3,sources:["/Users/wangweidong/Desktop/code/web-qun/src/page/notice/List.vue"],names:[],mappings:";AACA;EACE,YAAY;EACZ,aAAa;EACb,iBAAiB;EACjB,cAAc;EACd,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,iBAAiB;EACjB,8BAA8B;EAC9B,gBAAgB;EAChB,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;CAClB;AACD;EACE,uBAAuB;EACvB,gBAAgB;CACjB;AACD;EACE,uBAAuB;EACvB,mBAAmB;CACpB;AACD;EACE,mBAAmB;CACpB;AACD;EACE,sBAAsB;EACtB,YAAY;EACZ,eAAe;EACf,0BAA0B;EAC1B,gBAAgB;EAChB,cAAc;EACd,mBAAmB;EACnB,gBAAgB;CACjB",file:"List.vue",sourcesContent:["\n.warpper[data-v-2ddfbc45] {\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  padding: 20px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.header[data-v-2ddfbc45] {\n  background: #fff;\n  border-top: 4px solid #67c23a;\n  padding: 0 20px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.header span[data-v-2ddfbc45] {\n  line-height: 60px;\n  font-size: 16px;\n  font-weight: 600;\n}\n.content[data-v-2ddfbc45] {\n  background-color: #fff;\n  margin-top: 5px;\n}\n.filter[data-v-2ddfbc45] {\n  background-color: #fff;\n  padding: 10px 20px;\n}\n.filter span[data-v-2ddfbc45] {\n  margin-right: 10px;\n}\n.next[data-v-2ddfbc45] {\n  text-decoration: none;\n  color: #333;\n  display: block;\n  border: 1px solid #c2d5e3;\n  margin-top: 5px;\n  padding: 10px;\n  text-align: center;\n  font-size: 12px;\n}\n"],sourceRoot:""}])},"XT+F":function(t,e,n){"use strict";function i(t){n("NwyA")}Object.defineProperty(e,"__esModule",{value:!0});var o=n("eDIg"),s={data:function(){return{list:[],checkFilter:1,showNext:!1,itemNotice:{},showFilter:!1}},mounted:function(){var t=this;this.$store.dispatch("getUserInfo",this.$route.params.schoolId).then(function(){2===t.$store.state.userInfo.schoolModel?t.showFilter=!1:t.showFilter=!0}),this.getList(0,function(e){t.list=e,t.nextPageStatus(e,20)})},methods:{filter:function(t){var e=this;this.showNext=!1,this.checkFilter=t,this.getList(0,function(t){e.list=t,e.nextPageStatus(t,20)})},getList:function(t,e){var n=this;o.a.getNoticeList({schoolId:this.$route.params.schoolId,type:this.checkFilter,rowStart:t,rowCount:20},function(t){var i=[];t.forEach(function(t){i.push({title:t.noticeTitle,date:n.tools.formateTime(t.publishStartDate,"YYYY-MM-DD HH:mm"),end:n.tools.formateTime(t.publishEndDate,"YYYY-MM-DD HH:mm"),view:t.viewNum,noticeId:t.noticeId})}),e(i)},function(t){t.toUser&&n.$message.error(t.message)})},loadMore:function(){var t=this;this.getList(this.list.length,function(e){t.list=t.list.concat(e),t.nextPageStatus(e,20)})},nextPageStatus:function(t,e){t.length>=20?this.showNext=!0:this.showNext=!1},operation:function(t,e){switch(e){case"MODIFY":this.$router.push({name:"NoticeModify",params:{noticeId:t.noticeId}});break;case"PUSH":case"DELETE":this.itemNotice={noticeId:t.noticeId,name:t.title,type:e},this.noticeId=t.noticeId,this.confirmDialog()}},confirm:function(){var t=this;"PUSH"===this.itemNotice.type?o.a.pushNotice({schoolId:this.$route.params.schoolId,noticeId:this.noticeId},function(e){t.$message.success("推送成功")},function(e){e.toUser?t.$message.error(e.message):t.$message.error("推送失败")}):"DELETE"===this.itemNotice.type&&o.a.deleteNotice({schoolId:this.$route.params.schoolId,noticeId:this.noticeId},function(e){t.$message.success("删除成功");for(var n=0;n<t.list.length;n++){if(t.list[n].noticeId===t.itemNotice.noticeId){t.list.splice(n,1);break}}},function(e){e.toUser?t.$message.error(e.message):t.$message.error("删除失败")})},confirmDialog:function(){var t=this,e="PUSH"===this.itemNotice.type?"您确定推送标题为【"+this.itemNotice.name+"】的公告吗？":"DELETE"===this.itemNotice.type?"您确定删除标题为【"+this.itemNotice.name+"】的公告吗？":"";this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.confirm()}).catch(function(){})}}},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"warpper"},[t._m(0,!1,!1),t._v(" "),t.showFilter?n("div",{staticClass:"filter"},[n("span",[t._v("筛选:")]),t._v(" "),n("el-button",{attrs:{size:"mini",round:"",type:1==t.checkFilter?"primary":null},on:{click:function(e){t.filter(1)}}},[t._v("全校公告")]),t._v(" "),n("el-button",{attrs:{size:"mini",round:"",type:2==t.checkFilter?"primary":""},on:{click:function(e){t.filter(2)}}},[t._v("教师公告")]),t._v(" "),n("el-button",{attrs:{size:"mini",round:"",type:3==t.checkFilter?"primary":""},on:{click:function(e){t.filter(3)}}},[t._v("班级公告")])],1):t._e(),t._v(" "),n("div",{staticClass:"content"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[n("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",width:"50",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),n("el-table-column",{attrs:{prop:"date",label:"发布日期"}}),t._v(" "),n("el-table-column",{attrs:{prop:"end",label:"截止日期"}}),t._v(" "),n("el-table-column",{attrs:{prop:"view",label:"浏览量"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"medium",type:"text"},on:{click:function(n){t.operation(e.row,"MODIFY")}}},[t._v("修改")]),t._v(" "),n("el-button",{attrs:{size:"medium",type:"text"},on:{click:function(n){t.operation(e.row,"PUSH")}}},[t._v("推送")]),t._v(" "),n("el-button",{attrs:{size:"medium",type:"text"},on:{click:function(n){t.operation(e.row,"DELETE")}}},[t._v("删除")])]}}])})],1),t._v(" "),t.showNext?n("a",{staticClass:"next",attrs:{href:"javascript:;"},on:{click:t.loadMore}},[t._v("获取更多 >>")]):t._e()],1)])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("span",[t._v("公告列表")])])}],c={render:a,staticRenderFns:r},d=c,l=n("VU/8"),p=i,f=l(s,d,!1,p,"data-v-2ddfbc45",null);e.default=f.exports}});
//# sourceMappingURL=16.484580e456f9bb93577e.js.map